script = '''
sum_loop = \list i value
	len = list | get_array_length
	new_value = value + (list | get_list_element_at_index i)
	i is
		_ if i == len - 1
			new_value
		_
			list | sum_loop (i + 1) new_value

sum_list = \list
	list | sum_loop 0 0

[3, 4, 5] | sum_list
'''

[output]
result = "12"
type = "integer"

[output.compiler]
bytecode = "[37, 8, 115, 117, 109, 95, 108, 111, 111, 112, 3, 0, 76, 37, 8, 115, 117, 109, 95, 108, 105, 115, 116, 1, 0, 146, 38, 4, 109, 97, 105, 110, 39, 0, 3, 21, 0, 39, 1, 1, 21, 1, 29, 0, 0, 0, 3, 29, 0, 0, 0, 4, 29, 0, 0, 0, 5, 31, 0, 0, 0, 3, 41, 1, 0, 1, 8, 115, 117, 109, 95, 108, 105, 115, 116, 40, 38, 8, 115, 117, 109, 95, 108, 111, 111, 112, 20, 0, 48, 21, 3, 20, 2, 20, 0, 20, 1, 47, 0, 21, 4, 20, 1, 20, 3, 29, 0, 0, 0, 1, 1, 17, 46, 0, 5, 20, 4, 44, 0, 25, 20, 0, 20, 1, 29, 0, 0, 0, 1, 0, 20, 4, 41, 3, 1, 0, 8, 115, 117, 109, 95, 108, 111, 111, 112, 40, 38, 8, 115, 117, 109, 95, 108, 105, 115, 116, 20, 0, 29, 0, 0, 0, 0, 29, 0, 0, 0, 0, 41, 3, 1, 0, 8, 115, 117, 109, 95, 108, 111, 111, 112, 40]"
bytecode_length = 182
disassembled = """
0 \tfunction signature (name: sum_loop) (local count: 3) (function position: 76)
13 \tfunction signature (name: sum_list) (local count: 1) (function position: 146)

26 \t=== function chunk: main ===
32 \tfunction (function index: 0) (params: 3)
35 \tset_value (index: 0)
37 \tfunction (function index: 1) (params: 1)
40 \tset_value (index: 1)
42 \tpush_integer (value: 3)
47 \tpush_integer (value: 4)
52 \tpush_integer (value: 5)
57 \tpush_list (length: 3)
62 \tcall sum_list (is_global: 0) (arg count: 1, function index: 1)
75 \tret

76 \t=== function chunk: sum_loop ===
86 \tget_value (index: 0)
88 \tget_array_length
89 \tset_value (index: 3)
91 \tget_value (index: 2)
93 \tget_value (index: 0)
95 \tget_value (index: 1)
97 \tget_list_element_at_index
98 \tint_add
99 \tset_value (index: 4)
101 \tget_value (index: 1)
103 \tget_value (index: 3)
105 \tpush_integer (value: 1)
110 \tint_sub
111 \teq
112 \tjump if false (offset: 5, to byte 120)
115 \tget_value (index: 4)
117 \tjump (offset: 25, to byte 145)
120 \tget_value (index: 0)
122 \tget_value (index: 1)
124 \tpush_integer (value: 1)
129 \tint_add
130 \tget_value (index: 4)
132 \tcall sum_loop (is_global: 1) (arg count: 3, function index: 0)
145 \tret

146 \t=== function chunk: sum_list ===
156 \tget_value (index: 0)
158 \tpush_integer (value: 0)
163 \tpush_integer (value: 0)
168 \tcall sum_loop (is_global: 1) (arg count: 3, function index: 0)
181 \tret
"""

[output.vm]
bytes_read = 288
instructions_executed = 82
jumps_performed = 3
max_stack_height = 21
stack_allocations = 61
