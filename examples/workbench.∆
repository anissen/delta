
# Long term syntax?
# data Position
# 	x f32
# 	y f32

# pos = Position
# 	x: 2.3
# 	y: 3.4

# Short term syntax?
# component Position { x f32, y f32, z f32 }
# component Velocity { dx f32, dy f32 }
# pos = Position { y 2.3, x 4.5, z 3.0 }
# vel = Velocity { dx 1.0, dy 0.5 }

# --------------------

# for Position p, Velocity v in ∆
# 	p += v

# component Player {
# 	p Position
# 	v Velocity
# }

# ∆(Player p)
# 	p.p += p.v

# ∆(Position p, Velocity v)
# 	| each(.p = )

# TODO(anissen): How to differentiate mutation of ∆ from simply creating a new ∆?
# ∆ = ∆(Position p, Velocity v)
# 	| map(.p += .v)

# ∆(Position p, Velocity v)
# 	p += v

# entities = ∆(Position p, Velocity v)

# entities
# 	| each
# 		.p += .v

# ∆ query
# 	Position p, Velocity v
# 		p += v
# 	Player p, IsTarget? t, !Dead
# 		t if :some t
# 			p.xyz = t

# --------------

# TODO:
# - Add a result diff to snapshot runs
# - Improve time steps for prism?
# - Initial query support for components
# - Exhaustiveness tests for `is`
# - Shorthand for partial `is`?

component Position { x f32, y f32 }
component Velocity { dx f32, dy f32 }

# ∆ | new [Position { x 32.0, y 64.0 }, Velocity { dx 1.0, dy 0.5 }]

# e = ∆.new([Position{...}])

# e = ∆ | new [Position { x 32.0, y 64.0 }]

# ∆ | new [ Position { x 32.0, y 64.0 }, Velocity { dx 1.0, dy 0.5 } ]

# ∆ | new
# 	Position { x 32.0, y 64.0 }
# 	Velocity { dx 1.0, dy 0.5 }

# ∆ | new
# | set Position { x 32.0, y 64.0 }
# | set Velocity { dx 1.0, dy 0.5 }

# should this be [...] | create ?
# create [45, 66]
create [Velocity { dx 0.1, dy 5.5 }, Position { x 11.0, y 22.0 }]
create [Position { x 141.0, y 422.0 }]
create [Position { x 32.0, y 64.0 }, Velocity { dx 1.0, dy 0.5 }]

do_stuff = \v
	query
		Position p, not Velocity
			("ONLY position, value: ({p.x}, {p.y})") | log
	query
		Position p, Velocity v
			("position is ({p.x}, {p.y}), velocity is ({v.dx}, {v.dy})") | log

4 | do_stuff
