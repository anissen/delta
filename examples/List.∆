# [3 4 + 4 5]

# get_list = \v
# 	[v*1 v*2 v*3]

# 3 | get_list

# @foreign map = \list: List[T] f: Function[T] => F => List[F]
# foreach elm in list: f(elm)

# sum = \list
# 	result = 0
# 	list | map \v
# 		result = result + v
# 	result

# [3 5 7] | sum

# [3 5 6] | index 1
# [3 5.4 6]

# [3.3 5.4 6.5] | List.get 1

# List.get = \list: List[T] index: int => T
# List.get = \list index
# 	@native list_get_element_at_index index

# --------

# map = \list fn
# 	len = list | get_array_length
# 	loop = \acc i
# 		("acc {i}") | log
# 		i is
# 			_ if i == len
# 				acc
# 			_
# 				mapped = list | get_list_element_at_index i | fn
# 				(acc | append mapped) | loop (i + 1)

# 	base = [0]
# 	base | loop 0

# [3, 4, 5] | map \x
# 	x * x

# --------

# map_one = \list i fn
# 	(list | get_list_element_at_index i) | fn

# [3, 4, 5] | map_one 1 \x
# 	x * x

# --------

# map_one = \fn
# 	list = [3, 4, 5]
# 	elm = list | get_list_element_at_index 1
# 	elm | fn

# f = \x
# 	x * x

# f | map_one

# --------

# # works
# map_one = \list fn
# 	list | get_list_element_at_index 1 | fn

# f = \x
# 	x * x

# [3, 4, 5] | map_one f

# --------

# # does not work
# map_one = \list i fn
# 	list | get_list_element_at_index i | fn

# f = \x
# 	x * x

# [3, 4, 5] | map_one 1 f
